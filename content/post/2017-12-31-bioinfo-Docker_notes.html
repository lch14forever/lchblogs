---
title: "Useful commands for Docker"
author: "Chenhao Li (李陈浩)"
date: 2017-12-31
tags: ["Bioinformatics"]
output: html_document
summary: "我的Docker初学笔记"
---



<section id="docker" class="level2">
<h2>改变Docker容器存储路径</h2>
<p>Linux下Docker的默认存储目录为<code>/var/lib/docker</code>。显然这个目录属于<code>root</code>分区（如果安装时进行过分区的话）。而一般这个分区会较小，我们更希望把容器和镜像存储于<code>/home</code>下。我根据这篇博客进行了更改<a href="https://sanenthusiast.com/change-default-image-container-location-docker/" class="uri">https://sanenthusiast.com/change-default-image-container-location-docker/</a></p>
</section>
<section id="docker" class="level2">
<h2>Docker常用操作</h2>
<ul>
<li>加载镜像：</li>
</ul>
<pre class="sh"><code>gunzip -c [docker.img.tar.gz] | docker load

docker pull [docker_image_name]

cat [docker_file] | docker build -t [image_name] -</code></pre>
<ul>
<li>启动容器</li>
</ul>
<pre class="sh"><code># 基本命令
docker run -it [image_name] 
# 退出时删除容器，加载host的文件路径
docker run -it --rm -v /host/directory:/container/directory [image_name]</code></pre>
<ul>
<li>attach</li>
</ul>
<pre class="sh"><code>docker attach [container_name/container_hash_ID]</code></pre>
<ul>
<li>detach（容器在后台运行）：</li>
</ul>
<p>Ctrl+p Ctrl+q</p>
<ul>
<li>列出所有容器（包括未在运行中的）</li>
</ul>
<pre class="sh"><code>docker ps -a 
docker rm [container] # 删除容器</code></pre>
<ul>
<li>列出所有镜像</li>
</ul>
<pre class="sh"><code>docker images
docker rmi [image] # 删除镜像</code></pre>
<ul>
<li>host和容器文件转移</li>
</ul>
<pre class="sh"><code>docker cp [source] [target] # use container hash id or name </code></pre>
<ul>
<li>Commit</li>
</ul>
<pre class="sh"><code>docker commit [container_name/container_hash_ID] [image_ID/image_name:image_tag]</code></pre>
</section>
