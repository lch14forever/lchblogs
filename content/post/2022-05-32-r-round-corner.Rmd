---
title: "åœ†è§’barplot"
author: "Chenhao Li"
output: html_document
categories: ["R", "ggplot2"]
tags: ["R", "ggplot2"]
date: 2021-08-30
summary: "ä¸åŒæ–¹æ³•å®ç°ggplot2åœ†è§’barplot"
---

```{r setup, include=FALSE}
knitr::opts_chunk$set(echo = TRUE)
```


### ä¾èµ–

```{r}
library(dplyr)
library(ggplot2)
```

### æ•°æ®

```{r}
dat <-  mutate(mtcars, index=1:n())
dat
```

### åŸºç¡€ä½œå›¾

æ¬§å¼åæ ‡
```{r}
ggplot(dat, aes(x=index, y=mpg)) + 
  geom_bar(stat="identity") + 
  theme(axis.text.x = element_blank())
```
æåæ ‡
```{r}
ggplot(dat, aes(x=index, y=mpg)) + 
  geom_bar(stat="identity") + 
  theme(axis.text.x = element_blank()) + 
  coord_polar()
```


### æ–¹æ³•1ï¼š`geom_segment` + `lineend = "round"`

```{r}
ggplot(dat, aes(x=index, xend=index,  y=0,yend=mpg)) + 
  geom_segment(lwd=4, lineend = "round")  +
  theme(axis.text.x = element_blank()) 
```

```{r}
ggplot(dat, aes(x=index, xend=index,  y=0,yend=mpg)) + 
  geom_segment(lwd=4, lineend = "round") + 
  theme(axis.text.x = element_blank())  + 
  coord_polar()
```
åœ¨æåæ ‡ä¸­ä¼¼ä¹ä¸æ˜¯æˆ‘ä»¬æƒ³è¦çš„ï¼Œå› ä¸ºçº¿æ®µçš„å®½åº¦ä¸èƒ½æåæ ‡åŒ–

### æ–¹æ³•2ï¼š`ggchicklet`

```{r}
#remotes::install_gitlab("hrbrmstr/ggchicklet")

ggplot(dat, aes(x=index,  y=mpg)) + 
  ggchicklet::geom_chicklet() + 
  theme(axis.text.x = element_blank())  
```
```{r}
ggplot(dat, aes(x=index,  y=mpg)) + 
  ggchicklet::geom_chicklet() + 
  coord_polar() + 
  theme(axis.text.x = element_blank()) 
```
åœ¨æåæ ‡ä¸‹å‡ºç°é”™è¯¯

### æ–¹æ³•3ï¼š`elementalist`

```{r}
#remotes::install_github("teunbrand/elementalist")
ggplot(dat, aes(x=index, y = mpg)) +
  elementalist::geom_bar_theme(stat="identity",
    element = elementalist::element_rect_round(radius = 0.25)) +
  theme(axis.text.x = element_blank()) 
```

```{r  error=TRUE}
ggplot(dat, aes(x=index, y = mpg)) +
  elementalist::geom_bar_theme(stat="identity",
    element = elementalist::element_rect_round(radius = 0.25)) +
  theme(axis.text.x = element_blank()) +
  coord_polar()
```

ä½œè€…è¯´ï¼Œæåæ ‡è¿™ä¸ªåŠŸèƒ½è¿˜æ²¡æœ‰å®ç°ğŸ˜…

### æœ€ç»ˆæ–¹æ³•ï¼š`ggforce::geom_shape()`

å¯¹`x`ï¼Œ`y`è¿›è¡Œå¤„ç†

```{r}
w <- 0.4

dat2 <- rbind(
  mutate(dat, index.new=index-w, mpg=0),
  mutate(dat, index.new=index+w, mpg=0),
  mutate(dat, index.new=index+w, mpg=mpg),
  mutate(dat, index.new=index-w, mpg=mpg)
  ) 
```

```{r}
ggplot(dat2, aes(x=index.new, y=mpg, group=index)) + 
  ggforce::geom_shape(radius = unit(1.2, 'mm') ) +
  theme(axis.text.x = element_blank())
```

```{r fig.height=6, fig.width=6}
ggplot(dat2, aes(x=index.new, y=mpg, group=index)) + 
  ggforce::geom_shape( radius = unit(1.2, 'mm')) +
  coord_polar() + 
  labs(x=NULL, y=NULL) + 
  theme(axis.text = element_blank(), axis.ticks = element_blank()) 
```


### è¿è¡Œä¿¡æ¯

```{r}
sessionInfo()
```
